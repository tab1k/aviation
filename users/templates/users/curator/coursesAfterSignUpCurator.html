{% extends 'users/curator/base.html' %}
{% load static %}
<!DOCTYPE html>
<html lang="ru" dir="ltr">

<head>
  <meta charset="utf-8">
  <title></title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'student/css/mainstyles.css' %}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lexend&display=swap">
  {% block css %}<link rel="stylesheet" type="text/css" href="{% static 'student/css/coursesAfterSignUp.css' %}" rel="stylesheet" />
  <link rel="stylesheet" href="{% static 'curator/css/mainAfterSignUpAdmin.css' %}">{% endblock %}
  <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'student/css/slider-slick.css' %}">
</head>

<body>
  <div class="all_page">

    {% block content %}
        <div class="content">

      <!-- search-input -->

      <!-- Training sectors -->

       <div class="courses_sector">
        <h2 class="training_sectors_h2">Мои курсы</h2>
            <div style="flex-wrap: initial;" class="training_sectors_images training_slider_cources" >
                    {% for c in courses %}
                      <a href="{% url 'stransit:users:student:courses:modules' c.pk %}">
                        <div class="training_sectors_indusrial">
                          <div class="aviation-img rel">
                            <div class="course-info">
                              <div class="course-type">
                                <h3>{{ c.title|truncatechars:10 }}</h3>
                              </div>
                              <button class="course-minutes">
                                {{ c.duration }} min
                              </button>
                            </div>
                            <img src="{% static 'admin/img/Mask Group.png' %}" alt="">
                            <div class="aviation-text-industry">
                              <p>{{ c.description|truncatechars:80 }}</p>
                            </div>
                          </div>
                        </div>
                      </a>
                    {% endfor %}
                  </div>

            <h2 class="training_sectors_h2">Новые уведомления</h2>

            <div class="news">

            <img onclick="prev()" class="prev" src="{% static 'student/img/next-button.svg' %}" alt="">
            <div class="news-buttons">
              <p class="prev-p">Предыдущий</p>
            <p class="next-p">Следующий</p>
            </div>

            <div class="news_info">
              <div class="date">
                  <h2>Ответы куратора </h2><p>Сегодня. {{ current_time|date:"d F Y" }}</p>
              </div>
              <div class="newsNone">
                {% for comment in curator_comments %}
                    <div class="comment">
                        <p><strong>Студент: {{ comment.user.get_full_name }}</strong></p>
                        <p>{{ comment.text }}</p>
                        <p><strong>Куратор: {{ comment.curator.get_full_name }}</strong> ({{ comment.timestamp }})</p>
                        <p>{{ comment.curator_response }}</p>
                    </div>
                {% empty %}
                    <p>Нет ответов куратора на комментарии студентов.</p>
                {% endfor %}
              </div>
            </div>

            <img onclick="next()" class="next" src="{% static 'student/img/next-button.svg' %}" alt="">

          </div>
       </div>

    {% endblock %}

    <script src="{% static 'student/js/side-bar.js' %}"></script>
    <script src="{% static 'student/js/slider-slick.js' %}"></script>
    <script src="{% static 'student/js/slider.js' %}"></script>
    <script>
      // Add the verbatim tag to avoid conflicts with Django template tags
      {% verbatim %}
      // Функция для переключения на предыдущую новость
      function prev() {
        const dateElement = document.querySelector('.date p');
        const newsElement = document.querySelector('.newsNone p');

        // Получаем текущую дату
        const currentDate = new Date(dateElement.textContent);

        // Вычитаем один день от текущей даты
        const prevDate = new Date(currentDate.getTime() - (24 * 60 * 60 * 1000));

        // Обновляем дату и текст новости
        dateElement.textContent = prevDate.toLocaleDateString();
        newsElement.textContent = 'Текст предыдущей новости';
      }

      // Функция для переключения на следующую новость
      function next() {
        const dateElement = document.querySelector('.date p');
        const newsElement = document.querySelector('.newsNone p');

        // Получаем текущую дату
        const currentDate = new Date(dateElement.textContent);

        // Прибавляем один день к текущей дате
        const nextDate = new Date(currentDate.getTime() + (24 * 60 * 60 * 1000));

        // Обновляем дату и текст новости
        dateElement.textContent = nextDate.toLocaleDateString();
        newsElement.textContent = 'Текст следующей новости';
      }
      {% endverbatim %}
    </script>
  </div>
</body>

</html>